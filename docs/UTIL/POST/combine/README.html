
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="../../_static/CMAQ_Logo_2_inch.png" sizes="600x593" rel="icon" type="image/png">
    <title>Combine &#8212; CMAQ 5.5+ documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=eec9c716"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'POST/combine/README';</script>
    <link rel="canonical" href="https://usepa.github.io/CMAQ/POST/combine/README.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/CMAQ_Logo_2_inch.png" class="logo__image only-light" alt="CMAQ 5.5+ documentation - Home"/>
    <img src="../../_static/CMAQ_Logo_2_inch.png" class="logo__image only-dark pst-js-only" alt="CMAQ 5.5+ documentation - Home"/>
  
  
</a></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/USEPA/CMAQ" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.epa.gov/cmaq" title="CMAQ - EPA Site" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/epa_seal_w-ring_RGB-sm.png" class="icon-link-image" alt="CMAQ - EPA Site"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://forum.cmascenter.org/" title="User Forum" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/cmas_logo.png" class="icon-link-image" alt="User Forum"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://usepa.github.io/CRACMM/" title="CRACMM" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/CRACMM_1.png" class="icon-link-image" alt="CRACMM"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/CMAQ_Logo_2_inch.png" class="logo__image only-light" alt="CMAQ 5.5+ documentation - Home"/>
    <img src="../../_static/CMAQ_Logo_2_inch.png" class="logo__image only-dark pst-js-only" alt="CMAQ 5.5+ documentation - Home"/>
  
  
</a></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/USEPA/CMAQ" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.epa.gov/cmaq" title="CMAQ - EPA Site" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/epa_seal_w-ring_RGB-sm.png" class="icon-link-image" alt="CMAQ - EPA Site"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://forum.cmascenter.org/" title="User Forum" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/cmas_logo.png" class="icon-link-image" alt="User Forum"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://usepa.github.io/CRACMM/" title="CRACMM" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/CRACMM_1.png" class="icon-link-image" alt="CRACMM"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../DOCS/Getting_Started.html">Getting Started</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../DOCS/Users_Guide/README.html">CMAQ User’s Guide</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/CMAQ_UG_ch01_overview.html">1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/CMAQ_UG_ch02_program_structure.html">2. Program Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/CMAQ_UG_ch03_preparing_compute_environment.html">3. Preparing Compute Environment for CMAQ Simulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/CMAQ_UG_ch04_model_inputs.html">4. Model Input Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/CMAQ_UG_ch05_running_a_simulation.html">5. Running a CMAQ Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/CMAQ_UG_ch06_model_configuration_options.html">6. Model Configuration Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/CMAQ_UG_ch07_model_outputs.html">7. Model Output Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/CMAQ_UG_ch08_analysis_tools.html">8. Analysis Tools for CMAQ output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/CMAQ_UG_ch09_process_analysis.html">9. Process Analysis and Budget</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/CMAQ_UG_ch10_HDDM-3D.html">10. Decoupled Direct Method in Three Dimensions (CMAQ-DDM-3D)</a></li>




<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/CMAQ_UG_ch11_ISAM.html">11. Integrated Source Apportionment Method (CMAQ-ISAM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/CMAQ_UG_ch12_sulfur_tracking.html">12. Sulfur Tracking Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/CMAQ_UG_ch13_WRF-CMAQ.html">13. WRF-CMAQ Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/CMAQ_UG_ch14_MPAS-CMAQ.html">14. MPAS-CMAQ Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/Appendix/README.html">Appendix</a></li>

</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../DOCS/Users_Guide/Tutorials/README.html">CMAQ Tutorials</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/Tutorials/CMAQ_UG_tutorial_configure_linux_environment.html">Configuring your compute environment for CMAQ simulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Users_Guide/Tutorials/CMAQ_UG_tutorial_running_benchmarks.html">CMAQ Benchmark Tutorials</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../DOCS/Release_Notes/README.html">Release Notes</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_Notes/CMAQ-Release-Notes%3A-Instrumented-Models.html">Instrumented Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_Notes/CMAQ-Release-Notes%3A-MPAS-CMAQ-Coupled-Model.html">MPAS-CMAQ Coupled Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_Notes/CMAQ-Release-Notes%3A-WRF-CMAQ-Coupled-Model.html">WRF-CMAQ Coupled Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_Notes/CMAQ-Release-Notes%3A-Chemistry.html">Chemistry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_Notes/CMAQ-Release-Notes%3A-Transport-Processes.html">Transport Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_Notes/CMAQ-Release-Notes%3A-Dry-Deposition-Air-Surface-Exchange.html">Dry Deposition/Air-Surface Exchange</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_Notes/CMAQ-Release-Notes%3A-Emissions-Updates.html">Emissions Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_Notes/CMAQ-Release-Notes%3A-Process-Analysis-%26-Sulfur-Tracking-Model-%28STM%29.html">Process Analysis &amp; STM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_Notes/CMAQ-Release-Notes%3A-Structural-Improvements.html">Structural Improvements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_Notes/CMAQ-Release-Notes%3A-Diagnostic-Options.html">Diagnostic Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_Notes/CMAQ-Release-Notes%3A-Preprocessors.html">Pre-processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_Notes/CMAQ-Release-Notes%3A-PYTOOLS.html">PYTOOLS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_Notes/CMAQ-Release-Notes%3A-Postprocessors.html">Post-processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_Notes/CMAQ-Release-Notes%3A-Utilities.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_Notes/CMAQ-Release-Notes%3A-Stratospheric%E2%80%90Tropospheric-Exchange-%28STE%29.html">Stratospheric-Tropospheric Exchange (STE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/CMAQ-Bugfix-Branch.html">Bug fix branch</a></li>

</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../DOCS/Release_FAQ/README.html">FAQs</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_FAQ/CMAQv5.5-Series-FAQ.html">FAQ v5.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DOCS/Release_FAQ/CMAQv5.4-Series-FAQ.html">FAQ v5.4</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../DOCS/Community_Support.html">Community Support</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Combine</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="combine">
<h1>Combine<a class="headerlink" href="#combine" title="Link to this heading">#</a></h1>
<p>This Fortran program combines fields from a set of IOAPI or wrfout input files to an output file.  The file assigned to environmental variable SPECIES_DEF defines the new species variables and how they are constructed.  This means that all the species listed in the SPECIES_DEF files need to be output when CMAQ is being run. One option is  to set the ACONC (or CONC) output to be all species.</p>
<section id="run-time-environment-variables-used">
<h2>Run Time Environment variables used:<a class="headerlink" href="#run-time-environment-variables-used" title="Link to this heading">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">GENSPEC</span>      <span class="n">Indicates</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">a</span> <span class="n">new</span> <span class="n">SPECIES_DEF</span> <span class="n">file</span> <span class="p">(</span><span class="n">does</span> <span class="ow">not</span> <span class="n">generate</span> <span class="n">OUTFILE</span><span class="p">)</span>
              <span class="n">Choices</span> <span class="n">are</span><span class="p">:</span> <span class="n">Y</span><span class="p">,</span> <span class="n">N</span><span class="o">.</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="n">setenv</span> <span class="n">GENSPEC</span> <span class="n">N</span><span class="p">)</span>
 <span class="n">SPECIES_DEF</span>  <span class="n">Set</span> <span class="n">location</span> <span class="n">of</span> <span class="n">species</span> <span class="n">definition</span> <span class="n">files</span><span class="o">.</span>
 <span class="n">INFILE1</span>      <span class="nb">input</span> <span class="n">file</span> <span class="n">number</span> <span class="mi">1</span>
              <span class="n">The</span> <span class="n">maximum</span> <span class="n">number</span> <span class="n">of</span> <span class="n">IOAPI</span> <span class="n">files</span> <span class="ow">is</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">be</span> <span class="n">one</span> <span class="n">less</span> <span class="n">than</span> <span class="n">the</span> <span class="k">global</span> <span class="n">IOAPI</span> <span class="n">parameter</span> <span class="n">MXFILE3</span><span class="o">.</span>
	      <span class="n">Since</span> <span class="n">this</span> <span class="n">parameter</span> <span class="ow">is</span> <span class="n">currently</span> <span class="nb">set</span> <span class="n">to</span> <span class="mi">64</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">cmascenter</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">ioapi</span><span class="o">/</span><span class="n">documentation</span><span class="o">/</span><span class="n">all_versions</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">TUTORIAL</span><span class="o">.</span><span class="n">html</span><span class="p">),</span>
	      <span class="n">the</span> <span class="n">maximum</span> <span class="n">number</span> <span class="n">of</span> <span class="n">IOAPI</span> <span class="nb">input</span> <span class="n">files</span> <span class="ow">is</span> <span class="mf">63.</span>
 <span class="n">OUTFILE</span>      <span class="n">IOAPI</span> <span class="n">output</span> <span class="n">file</span> <span class="n">name</span><span class="p">,</span> <span class="n">opened</span> <span class="k">as</span> <span class="n">read</span><span class="o">/</span><span class="n">write</span> <span class="k">if</span> <span class="n">it</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">exist</span> <span class="ow">and</span> 
              <span class="n">read</span><span class="o">/</span><span class="n">write</span><span class="o">/</span><span class="n">update</span> <span class="k">if</span> <span class="n">it</span> <span class="n">already</span> <span class="n">exists</span>
</pre></div>
</div>
</section>
<section id="run-time-environment-variables-not-required">
<h2>Run Time Environment Variables (not required):<a class="headerlink" href="#run-time-environment-variables-not-required" title="Link to this heading">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">IOAPI_ISPH</span>  <span class="n">projection</span> <span class="n">sphere</span> <span class="nb">type</span> <span class="p">(</span><span class="n">use</span> <span class="nb">type</span> <span class="c1">#20 to match WRF/CMAQ)</span>
             <span class="p">(</span><span class="n">the</span> <span class="n">default</span> <span class="k">for</span> <span class="n">this</span> <span class="n">program</span> <span class="ow">is</span> <span class="mi">20</span><span class="p">,</span> <span class="n">overriding</span> <span class="n">the</span> <span class="n">ioapi</span> <span class="n">default</span> <span class="n">of</span> <span class="mi">8</span><span class="p">)</span> 
</pre></div>
</div>
<p>Record type descriptions in SPECIES_DEF file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> / records are comment lines
 ! records are comment lines
 # records can be used to define parameters
 #start   YYYYDDD  HHMMSS
 #end     YYYYDDD  HHMMSS
 #layer      KLAY     (default is all layers)
</pre></div>
</div>
<p>All other records are read as variable definition records</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="nb">format</span> <span class="n">of</span> <span class="n">variable</span> <span class="n">definition</span> <span class="n">records</span> <span class="p">(</span><span class="n">comma</span> <span class="n">seperated</span> <span class="n">fields</span><span class="p">)</span>
 <span class="n">field</span> <span class="mi">1</span><span class="p">:</span> <span class="n">variable</span> <span class="n">name</span> <span class="p">(</span><span class="n">maximum</span> <span class="n">of</span> <span class="mi">16</span> <span class="n">characters</span><span class="p">)</span>
 <span class="n">field</span> <span class="mi">2</span><span class="p">:</span> <span class="n">units</span> <span class="p">(</span><span class="n">maximum</span> <span class="n">of</span> <span class="mi">10</span> <span class="n">characters</span><span class="p">)</span>
 <span class="n">field</span> <span class="mi">3</span><span class="p">:</span> <span class="n">formular</span> <span class="n">expression</span> <span class="p">(</span><span class="n">maximum</span> <span class="n">of</span> <span class="mi">512</span> <span class="n">characters</span><span class="p">)</span>
</pre></div>
</div>
<p>Formular expressions support operators ^+-*/ and are evaluated based on mathematical order of operations, i.e., powers first, multiplication/division next and addition/subtraction last. Order of evaluation can be forced by use of parentheses. When part of an expression is enclosed in parentheses, that part is evaluated first.   Table 1. lists supported functions evalutated for each grid cell per each file time step. In addition, formular expressions can use conditional statements of the form “expression_for_condition ? expresssion_if_true :  expression_if_false”. Conditional statements have the highest rank in the order of formular operations.</p>
<p>Table 1. Grid Cell Functions per Output Time Step</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Name</p></th>
<th class="head text-center"><p>Result</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>LOG(X[n])</p></td>
<td class="text-center"><p>Natural Logarithm of X[n]</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>LOG10(X[n])</p></td>
<td class="text-center"><p>Logarithm Base 10 of X[n]</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>EXP(X[n])</p></td>
<td class="text-center"><p>Exponential of X[n]</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>SIN(X[n])</p></td>
<td class="text-center"><p>Sine of X[n]</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>COS(X[n])</p></td>
<td class="text-center"><p>Cosine of X[n]</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>TAN(X[n])</p></td>
<td class="text-center"><p>Tangent of X[n]</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>ASIN(X[n])</p></td>
<td class="text-center"><p>Arcsine of X[n]</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>ACOS(X[n])</p></td>
<td class="text-center"><p>Arccosine of X[n]</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>ATAN(X[n])</p></td>
<td class="text-center"><p>Acrtangent of X[n]</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>ABS(X[n])</p></td>
<td class="text-center"><p>Absolute Value of X[n]</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>SINH(X[n])</p></td>
<td class="text-center"><p>Hyperbolic Sine of X[n]</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>COSH(X[n])</p></td>
<td class="text-center"><p>Hyperbolic Cosine of X[n]</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>TANH(X[n])</p></td>
<td class="text-center"><p>Hyperbolic Tangent of X[n]</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>INT(X[n])</p></td>
<td class="text-center"><p>Integer Truncation of X[n]</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>SQRT(X[n])</p></td>
<td class="text-center"><p>Square Root of X[n]</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>SIGN(X[n])</p></td>
<td class="text-center"><p>Sign of X[n]</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>ERF(X[n])</p></td>
<td class="text-center"><p>Gauss Error Function of X[n]</p></td>
</tr>
</tbody>
</table>
</div>
<p><sup> 0 </sup> Value of n equals an input file number or zero if X is a derived variable.</p>
<p>Formular expresssions can also use functions (Table 2.) computed for a variable <em>common</em> to all input files so each input file <em>must</em> contain a variable named X at the timestep.</p>
<p>Table 2. Functions over all Input Files per Output Time Step</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Name</p></th>
<th class="head text-center"><p>Result</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>FMAX[X]</p></td>
<td class="text-center"><p>Maximum of X over files</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>FMIN[X]</p></td>
<td class="text-center"><p>Minumum of X over files</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>FAVG[X]</p></td>
<td class="text-center"><p>Average of X over files</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>FSDEV[X]</p></td>
<td class="text-center"><p>Standard Deviation of X over files</p></td>
</tr>
</tbody>
</table>
</div>
<p>Variables from input files are defined by their name followed by its file number enclosed in brackets. Once defined in a species definition file, variables can subsequently be referred to by their name and the number zero enclosed in brackets. Adding a + or - sign before the file number within the bracket instructs combine to use the variable value for the next or previous timestep instead of the current time step when evaluating the expression. This can be used to define variables that are computed as difference between the current and previous time step, for example to compute hourly precipitation as the difference in WRF cumulative precipitation values between successive timesteps.</p>
<p>Examples of possible post-processing expressions are shown in the sample SPECIES_DEF files under the scripts/spec_def_files folder in this directory. Species definitions are used to specify how the concentrations of raw output species from CMAQ should be aggregated or transformed into variables of interest. For example, the concentrations of NO and NO<sub>2</sub> from CMAQ can be added together to yield the concentration of NO<sub>x</sub>. Because each chemical mechanism being used in CMAQ differs in the number and kind of species it treats, each example file is specific to a certain chemical mechanism. The sample SpecDef files provided have been labeled according to the mechanism each corresponds to. In version 5.5, we have added SpecDef_Conc files which explicitly map output from the CCTM_CONC and CCTM_ACONC variables to post-processed variables consistent with output from the ELMO module. See <a class="reference internal" href="../../DOCS/Users_Guide/CMAQ_UG_ch08_analysis_tools.html"><span class="std std-doc">User Guide section 8.2</span></a>.</p>
<p>In addition to each SpecDef file, a SpecDef_Dep file exists for each chemical mechanism that demonstrates how deposition rates can be aggregated to useful quantities (these are indicated with the “Dep” label in the file name). Users wanting to apply <code class="docutils literal notranslate"><span class="pre">combine</span></code> to other post-processing tasks (e.g. aggregating raw DDM3D or ISAM output species, aggregating individual aerosol species from DESID diagnostic emission files into total PM emissions) can use these sample files as a starting point for creating their own SPECIES_DEF files supporting such applications.</p>
<p><strong>If you have questions about the sample species definition files or find something that does not seem correct please discuss it with us by creating an “Issue” through GitHub or contacting the CMAS Help Desk: http://www.cmascenter.org.</strong></p>
</section>
<section id="compile-combine-source-code">
<h2>Compile combine source code:<a class="headerlink" href="#compile-combine-source-code" title="Link to this heading">#</a></h2>
<p>Execute the build script to compile combine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd $CMAQ_HOME/POST/combine/scripts
./bldit_combine.csh [compiler] [version] |&amp; tee build_combine.log
</pre></div>
</div>
</section>
<section id="run-combine">
<h2>Run combine:<a class="headerlink" href="#run-combine" title="Link to this heading">#</a></h2>
<p>Edit the sample run script (run.combine.aconc), then run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="o">./</span><span class="n">run</span><span class="o">.</span><span class="n">combine</span> <span class="o">|&amp;</span> <span class="n">tee</span> <span class="n">combine</span><span class="o">.</span><span class="n">aconc</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
<p>A sample run script for creating combine files for evaluating deposition and hourly average concentrations is also provided (run_combine.csh). In addition to aggregating CCTM output variables, this script also illustrates the use of looping to combine day-specific CCTM files with hourly values into a single output file with hourly values that spans the entire analysis period. Note that this sample run script contains two time loops over days, one for creating the combine file for hourly average concentrations (using inputs from CCTM_ACONC, CCTM_AELMO, METCRO2D, and METCRO3D) and a second one for creating the combine file for deposition (using inputs from CCTM_DRYDEP, CCTM_WETDEP1, and METCRO2D). Within each time loop, specific definitions of SPECIES_DEF, INFILEx and OUTFILE are being set up before calling the <code class="docutils literal notranslate"><span class="pre">combine</span></code> executable for each day. If users wish to adapt this run script for their own application (e.g. for aggregating diagnostic emission files), only a single time loop may be required.</p>
<p>Check the log file to ensure complete and correct execution without errors.</p>
</section>
<section id="note-on-the-use-of-wrfout-files-as-input-to-combine">
<h2>Note on the use of wrfout files as input to combine:<a class="headerlink" href="#note-on-the-use-of-wrfout-files-as-input-to-combine" title="Link to this heading">#</a></h2>
<p>Meteorological variables used as part of the SPECIES_DEF file typically are obtained from wrfout files that have been processed through MCIP and follow IOAPI-netCDF formatting guidelines. However, <code class="docutils literal notranslate"><span class="pre">combine</span></code> also allows reading variables directly from wrfout files to support post-processing of outputs from the two-way model when MCIP files may not be available.  To make use of this capability, several requirements need to be met:</p>
<ul class="simple">
<li><p>When using a combination of IOAPI and (netcdf) wrfout files as input files, the first input file (i.e. INFILE1) <strong>must</strong> be an IOAPI file and its grid description information will be used to define the grid for OUTFILE.</p></li>
<li><p>Only wrfout variables defined with dimensions “west_east”, “south_north”, and optionally “bottom_top” can be utilized by <code class="docutils literal notranslate"><span class="pre">combine</span></code> and referenced in the SPECIES_DEF file.</p></li>
<li><p>The projection used in the WRF simulation that generated the wrfout files must be the same as the projection defined in the IOAPI files, specifically INFILE1.</p></li>
</ul>
<p>If necessary, combine will window the variables from the wrfout file to the domain specified in INFILE1, this often is the case when the CMAQ domain was a subset of the WRF domain. To support such windowing, the following conditions need to be met <a class="reference external" href="https://github.com/USEPA/CMAQ/wiki/CMAQ-Release-Notes:-Preprocessors#mcip" rel="noreferrer" target="_blank">(also see the MCIP release notes for CMAQv5.5) <svg version="1.1" width="1.0em" height="1.0em" viewBox="0 0 16 16" aria-hidden="true" style="display: inline-block; vertical-align: middle; fill: currentColor;"><path d="M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z"></path></svg></a>:</p>
<ul class="simple">
<li><p>The domains defined in the wrfout and INFILE1 files need to be concentric.</p></li>
<li><p>The horizontal grid spacing defined in the wrfout and INFILE1 files needs to be greater than 400 meters because the rigor of the windowing algorithm has not been tested below that scale.</p></li>
</ul>
</section>
<section id="note-on-time-steps">
<h2>Note on time steps:<a class="headerlink" href="#note-on-time-steps" title="Link to this heading">#</a></h2>
<p>Unless “start” and “end” are defined in the SPECIES_DEF file, combine will determine the longest time period that is common to all input files and will produce outputs for that time period.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run-time-environment-variables-used">Run Time Environment variables used:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run-time-environment-variables-not-required">Run Time Environment Variables (not required):</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compile-combine-source-code">Compile combine source code:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run-combine">Run combine:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#note-on-the-use-of-wrfout-files-as-input-to-combine">Note on the use of wrfout files as input to combine:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#note-on-time-steps">Note on time steps:</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>